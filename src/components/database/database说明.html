<html lang="en"><head>
    <meta charset="UTF-8">
    <title></title>
<style id="system" type="text/css">*{margin:0;padding:0;}body {	font:13.34px helvetica,arial,freesans,clean,sans-serif;	color:black;	line-height:1.4em;	background-color: #F8F8F8;	padding: 0.7em;}p {	margin:1em 0;	line-height:1.5em;}table {	font-size:inherit;	font:100%;	margin:1em;}table th{border-bottom:1px solid #bbb;padding:.2em 1em;}table td{border-bottom:1px solid #ddd;padding:.2em 1em;}input[type=text],input[type=password],input[type=image],textarea{font:99% helvetica,arial,freesans,sans-serif;}select,option{padding:0 .25em;}optgroup{margin-top:.5em;}pre,code{font:12px Monaco,"Courier New","DejaVu Sans Mono","Bitstream Vera Sans Mono",monospace;}pre {	margin:1em 0;	font-size:12px;	background-color:#eee;	border:1px solid #ddd;	padding:5px;	line-height:1.5em;	color:#444;	overflow:auto;	-webkit-box-shadow:rgba(0,0,0,0.07) 0 1px 2px inset;	-webkit-border-radius:3px;	-moz-border-radius:3px;border-radius:3px;white-space: pre-wrap;word-wrap:break-word;}pre code {	padding:0;	font-size:12px;	background-color:#eee;	border:none;}code {	font-size:12px;	background-color:#f8f8ff;	color:#444;	padding:0 .2em;	border:1px solid #dedede;}img{border:0;max-width:100%;}abbr{border-bottom:none;}a{color:#4183c4;text-decoration:none;}a:hover{text-decoration:underline;}a code,a:link code,a:visited code{color:#4183c4;}h2,h3{margin:1em 0;}h1,h2,h3,h4,h5,h6{border:0;}h1{font-size:170%;border-top:4px solid #aaa;padding-top:.5em;margin-top:1.5em;}h1:first-child{margin-top:0;padding-top:.25em;border-top:none;}h2{font-size:150%;margin-top:1.5em;border-top:4px solid #e0e0e0;padding-top:.5em;}h3{margin-top:1em;}hr{border:1px solid #ddd;}ul{margin:1em 0 1em 2em;}ol{margin:1em 0 1em 2em;}ul li,ol li{margin-top:.5em;margin-bottom:.5em;}ul ul,ul ol,ol ol,ol ul{margin-top:0;margin-bottom:0;}blockquote{margin:1em 0;border-left:5px solid #ddd;padding-left:.6em;color:#555;}dt{font-weight:bold;margin-left:1em;}dd{margin-left:2em;margin-bottom:1em;}@media screen and (min-width: 768px) {    body {        width: 748px;        margin:10px auto;    }}</style><style id="custom" type="text/css"></style></head>
<body marginheight="0"><h1>vue表格组件</h1>
<ul>
<li>依赖于<a href="http://www.fontawesome.com.cn/">fontawesome</a>图标</li>
<li>依赖于vue-resource插件</li>
</ul>
<hr>
<h3>简介：</h3>
<h3>用法：</h3>
<blockquote>
<p>1、导入该组件
</p>
<pre><code>import database from './database.vue'</code></pre>
<p>2、组件整体格式
</p>
<pre><code>// 注意：表格宽高是撑满父容器的！
&lt;div style="width: 100%; height: calc(100% - 60px)"&gt;
    &lt;database
        ref="database"
        :colData="colData"
        :rowData="rowData"
        :colRelation="colRelation"
        :entry="entry"
        :scrollSpeed="scrollSpeed"
          :showCheckBoxAndIndex="showCheckBoxAndIndex"
          :onlyShowIndex="onlyShowIndex"
          :showPrompt="showPrompt"
        :showOperate="showOperate"
        :option_limit="option_limit"
        :searchDelayTime="searchDelayTime"
        :showOptionPage="showOptionPage"
        @selectChange="selectChange"&gt;
    &lt;/database&gt;
&lt;/div&gt;
// 注意：其中只有colData、rowData是必须的！</code></pre>
<p>3、rowData属性

</p>
</blockquote>
<pre><code>// 单元格类型：number、select、mul_select、opt_mul_select、opt_select、edit、normal，及日期时间类型：time、date、datetime、month、year
// 具体格式注释：
rowData = [{

    checked: i == 0||i==1||i==2? true: false, //有复选框时，他表示是否初始化选中（默认为false）
    noCheckAble: i == 1 || i == 2? true: false, //true表示复选框禁用

    a1: {
        type: "time", // 类型

        value: '2012-03-15' // 值（必需）
        required: true, //表示不能为空
        /*对input的个性化*/
        style: {
            background: '#f00',
            color: '#fff'
        }
    },
    //不需要url的多选, 注意option字段格式
    a_1: { 
        type: "opt_mul_select",
        option: [{id: 1, name: 'name1'},{id: 2, name: 'name2'},{id: 3, name: 'name3'}],
        value: ['name1', 'name2'],
        id: [1,2],
        required: true,
    },
    //不需要url的单选, 注意option字段格式
    a_2: {
        type: "opt_select",
        option: [{id: 1, name: 'name1'},{id: 2, name: 'name2'},{id: 3, name: 'name3'}],
        value: '',
        id: '',
        required: true,
    },
    a2: {
        type: "number", //数字类型

        min: 0, //数字类型的，表示最小值
        max: 20, //数字类型的，表示最大值
        floatLength: 2, //数字类型的，表示小数位数
        value: 0.2*i, //（必需）
        required: true, //表示不能为空
        /*对input的个性化*/
        style: {
            background: '#f00',
            color: '#fff'
        }
    },
    a3: {
        type: "select", //单选下拉

        url: '/public/select.json', //单选下拉的请求的url（必需），且请求结果格式是[{id: ?, name: ?}, ...]
        dataPos: 'data.result', // 请求结果在res.data.data.result中，默认'data.result'
        dataTotal: 'data.total', // 当option分页时，表示请求的总数在res.data.data.total中，默认'data.total'
        value: 'name-3',//（必需）
        id: 3, //（必需）
        required: true, //表示不能为空
    },
    a4: {
        type: "mul_select", //多选下拉
        url: '/public/select.json', //（必需）
        dataPos: 'data.result',
        dataTotal: 'data.total',
        value: ['name-2', 'name-3', 'name-4'], //多选下拉的值，必须是数组类型（必需）
        id: [2,3,4] //多选下拉的id，必须是数组类型（必需）
    },
    a7: {
        type: "edit", //编辑类型
        value: 'edit',
    },
    a8: {
        type: "normal", //普通类型
        value: 'xxoo',
    },
    a5: {
        type: "date",
        value: '2011-11-11',
    },
    a6: {
        type: "datetime",
        value: '2012-02-02 12:53:04'
    },
}, ...]</code></pre>
<blockquote>
<p>4、colData属性

</p>
</blockquote>
<pre><code>colData: [
    {
        title: "时间", // 该列表头名称
        props: "a1",  // 该列取rowData的项中的哪一项属性来使用，比如取rowData[x].a1则值为'a1'
        width: 120,   // 该列的宽度
        icon: 'time', // 该列的图标class（预先定义time/date/number/select/mul_select/edit值），设为其他值则需要完整传入图标的类名
        fixed: true   //是否属于左侧固定列（注意：固定列均要定义在普通列前面）
    },
    {
        title: "数字编辑",
        width: 120,
        props: "a2",
        icon: 'number',
        fixed: true,
        hide: true, //表示隐藏该列
    },
    {
        title: "单选",
        width: 130,
        props: "a3",
        icon: 'select',
        // fixed: true
    },
    {
        title: "多选",
        width: 140,
        props: "a4",
        icon: 'mul_select',
        // fixed: true
    },
    {
        title: "日期",
        width: 140,
        icon: 'date',
        props: "a5"
    },
    {
        title: "日期时间",
        width: 140,
        icon: 'date',
        props: "a6"
    },
    {
        title: "编辑",
        width: 140,
        icon: 'edit',
        props: "a7"
    },
    {
        title: "普通-&gt;",
        width: 140,
        props: "a8"
    },
    ...
],</code></pre>
<blockquote>
<p>5、其他属性

</p>
</blockquote>
<pre><code>scrollSpeed：鼠标滚轮时的每次滚动行数（默认2，推荐1~3.5）

:showCheckBoxAndIndex：是否出现index索引和复选框
:onlyShowIndex：是否只出现index索引，不要复选框
:onlyShowCheckBox：是否只出现复选框，不要索引
showPrompt: 输入框文本溢出时是否出现tooltip提示框（默认true，设为false可提高性能）
:showOperate: 是否显示操作列
:showOptionPage：下拉选择框是否分页（默认true）=== 分页接口会是?limit=&amp;offset=&amp;q=形式，不分页只有?q=
:option_limit：下拉选择每页的分页限制（默认400条）
:searchDelayTime：下拉的搜索输入时等待时间（默认400毫秒）

colRelation: 多级表头关系数组（注意：多级表头定义时子层级要有父层级，不然中间会排版错位）
let colRelation = [
    {
      title: '层级2-1',  //表头名称
      level: 2,          //表头层级，原始操作行的层级为1
      indexStart: 2,     //从第2列开始
      indexEnd: 6,       //到第6列结束（不填，默认到列尾）
    },
    {
      title: '层级2-2',
      level: 2,
      indexStart: 6,
      indexEnd: 15,
    },
    {
      title: '层级3',
      level: 3,
      indexStart: 2,
      indexEnd: 18,
    }
],

entry：表格增加一行时，所需要行格式，和rowData中的项类似

entry = {
    a1: {
        type: "time",
        // value、id 可以通过function返回一个值
        value: function(){
            return Date.now()
        }
    },
    a2: {
        type: "number",
        min: 0,
        max: 20,
        floatLength: 2,
        value: 13123
    },
    a3: {
        type: "select",
        url: '/public/select.json',
        dataPos: 'data.result',
        value: '',
        id: ''
    },
    a4: {
        type: "mul_select",
        url: '/public/select.json',
        dataPos: 'data.result',
        // 注意多选的value、id 必须是数组！
        value: function(){
            return []
        },
        id: function(){
            return []
        }
    },
    a5: {
        type: "date",
        value: ''
    },
    a6: {
        type: "datetime",
        value: ''
    },
    a7: {
        type: "edit",
        value: ''
    },
}</code></pre>
<blockquote>
<p>6、关键组件事件

</p>
</blockquote>
<pre><code>
@selectChange="selectChange"  //单选和多选下拉选择一项后，触发该事件，参数是选择后的关键信息
@dateChange="dateChange" //日期、时间框切换时触发

// 当entry被定义后，可以执行该函数触发增加一行
this.$refs.database.addLine();

// 获取组件所有信息
let rows = this.$refs.database.getTable();

// 重新调整表格布局
this.$refs.database.doLayout();

// 对表格进行有效性required验证（true表示验证通过）
let msg = this.$refs.database.checkRequired();

// 获取被复选框勾选的行信息
let checkedRows = this.$refs.database.checkedRows();

// 重置表格
this.$refs.database.doReset();</code></pre>
<p>Edit By <a href="http://mahua.jser.me">MaHua</a></p>
</body></html>